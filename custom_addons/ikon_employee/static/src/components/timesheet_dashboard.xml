<?xml version="1.0" encoding="UTF-8" ?>
<templates>
    <t t-name="ikon_employee.Timesheet" owl="1">
        <Layout display="display">
            <div class="wrapper">
                <form class="timesheetForm" id="timesheetForm">
                    <div class="tableWrapper" style="overflow:auto">
                        <table style="width:100%" class="table">
                            <thead>
                                <tr>
                                    <th style="width:2%" class="center">
                                        <input type="checkbox" style="display:none"/>
                                    </th>
                                    <th style="width:24%" id="projectName">Project Name</th>
                                    <th style="width:18%" id="activityName">Activity Name</th>
                                    <t t-foreach="timesheet_data.date" t-as="day" t-key="day.id">
                                        <th class="center" style="width:8%">
                                            <t t-esc="formatDate(day.date)"/>
                                        </th>
                                    </t>

                                </tr>
                            </thead>
                            <tbody>
                                <tr class="odd">
                                    <td id="">
                                        <input class="toDelete" type="checkbox" name="initialRows[0][toDelete]"
                                               id="initialRows_0_toDelete"/>
                                    </td>
                                    <td>
                                        <select class="projectActivity" style="width:225px"
                                                name="projectName"
                                                id="projectName">
                                            <option value="-1">-- Select --</option>
                                            <t t-foreach="timesheet_data.project" t-as="project" t-key="project.id">
                                                <option t-att-value="project.project_id[0]">
                                                    <t t-esc="project.project_id[1]"/>
                                                </option>
                                            </t>
                                        </select>
                                    </td>

                                    <td>
                                        <select class="projectActivity" style="width:225px"
                                                name="activityProject"
                                                id="initialRows_0_projectActivityName">
                                            <option value="-1">-- Select --</option>
                                            <t t-foreach="timesheet_data.activity" t-as="project" t-key="project.id">
                                                <option t-att-value="project.id">
                                                    <t t-esc="project.name"/>
                                                </option>
                                            </t>
                                        </select>
                                        <input type="hidden" name="initialRows[0][projectActivityId]"
                                               id="initialRows_0_projectActivityId"/>
                                    </td>

                                    <t t-foreach="hours" t-as="hour" t-key="hour.id">
                                        <td class="comments">
                                            <input align="center" class="timeBox" type="text" name="initialRows[0][0]"
                                                   id="initialRows_0_0" t-model="hour.unit_amount" value=""/>
                                            <img class="commentIcon" data-bs-toggle="modal"
                                                 t-att-data-bs-target="'#exampleModal' + hour.id"
                                                 src="http://app.ikonsultan.com/ikonhrm/symfony/web/webres_5cc83b08d42f86.60948938/themes/default/images/comment.png"/>
                                            <input type="hidden" name="taskId" t-model="state.task_id" t-att-value="'1'"
                                                   value="'1'" id="taskId"/>
                                            <input type="hidden" name="projectId" t-model="state.project_id"
                                                   t-attf-value="dataProjectId" value="dataProjectId" id="projectId"/>
                                            <input type="hidden" name="dataId" t-model="hour.id"
                                                   t-attf-value="hour.id" value="hour.id" id="projectId"/>
                                            <input type="hidden" name="dateId" t-model="hour.date"
                                                   t-attf-value="hour.date" value="hour.date" id="projectId"/>

                                            <!-- Modal Popup for each hour -->
                                            <div class="modal fade" t-att-id="'exampleModal' + hour.id" tabindex="-1"
                                                 aria-labelledby="exampleModalLabel" aria-hidden="true">
                                                <div class="modal-dialog">
                                                    <div class="modal-content">
                                                        <div class="modal-header">
                                                            <h1 class="modal-title fs-5" id="exampleModalLabel">Add New
                                                                Task
                                                            </h1>
                                                            <button type="button" class="btn-close"
                                                                    data-bs-dismiss="modal" aria-label="Close"></button>
                                                        </div>
                                                        <div class="modal-body">
                                                            <div class="mb-3 row">
                                                                <label for="name" class="col-sm-2 col-form-label">Task
                                                                    Name
                                                                </label>
                                                                <div class="col-sm-10">
                                                                    <input type="text" class="form-control" id="name"
                                                                           t-model="hour.name" value=""/>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="modal-footer">
                                                            <button type="button" class="btn btn-secondary"
                                                                    data-bs-dismiss="modal">Close
                                                            </button>
                                                            <button type="button" class="btn btn-primary"
                                                                    t-on-click="() => saveDescription(hours)">Save changes
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </td>
                                    </t>

                                    <!--                                    <t t-foreach="hours" t-as="hour" t-key="hour.id">-->
                                    <!--                                        <td class="comments">-->
                                    <!--                                            <input align="center" class="timeBox" type="text" name="initialRows[0][0]"-->
                                    <!--                                                   id="initialRows_0_0" t-model="hour.unit_amount" value=""/>-->
                                    <!--                                            <img id="description" class="commentIcon" data-bs-toggle="modal" data-bs-target="#exampleModal"-->
                                    <!--                                                 src="http://app.ikonsultan.com/ikonhrm/symfony/web/webres_5cc83b08d42f86.60948938/themes/default/images/comment.png"/>-->
                                    <!--                                            <input type="hidden" name="taskId" t-model="state.task_id" t-att-value="'1'"-->
                                    <!--                                                   value="'1'"-->
                                    <!--                                                   id="taskId"/>-->
                                    <!--                                            <input type="hidden" name="projectId" t-model="state.project_id"-->
                                    <!--                                                   t-attf-value="dataProjectId" value="dataProjectId"-->
                                    <!--                                                   id="projectId"/>-->
                                    <!--                                        </td>-->
                                    <!--                                    </t>-->

                                </tr>

                                <tr id="extraRows" style="display: none;"></tr>

                            </tbody>
                        </table>
                    </div> <!-- tableWrapper -->

                    <!-- Modal Popup-->

                    <!--                    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel"-->
                    <!--                         aria-hidden="true">-->
                    <!--                        <div class="modal-dialog">-->
                    <!--                            <div class="modal-content">-->
                    <!--                                <div class="modal-header">-->
                    <!--                                    <h1 class="modal-title fs-5" id="exampleModalLabel">Add New Task</h1>-->
                    <!--                                    <button type="button" class="btn-close" data-bs-dismiss="modal"-->
                    <!--                                            aria-label="Close"></button>-->
                    <!--                                </div>-->
                    <!--                                <div class="modal-body">-->
                    <!--                                    <div class="mb-3 row">-->
                    <!--                                        <label for="name" class="col-sm-2 col-form-label">Task Name</label>-->
                    <!--                                        <div class="col-sm-10">-->
                    <!--                                            <input type="text" class="form-control" id="name" t-model="timesheet_data.taskDescription" value=""/>-->
                    <!--                                        </div>-->
                    <!--                                    </div>-->


                    <!--                                </div>-->
                    <!--                                <div class="modal-footer">-->
                    <!--                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close-->
                    <!--                                    </button>-->
                    <!--                                    <button type="button" class="btn btn-primary" t-on-click="save">Save changes-->
                    <!--                                    </button>-->
                    <!--                                </div>-->
                    <!--                            </div>-->
                    <!--                        </div>-->
                    <!--                    </div>-->

                    <div class="bottom">
                        <p class="required">
                            <em>*</em>
                            Deleted project activities are not editable
                        </p>
                        <p class="button-list">
                            <input type="submit" class="submit" value="Save" name="btnSave" id="submitSave"
                                   t-on-click="() => send(state, hours)"/>
                            <!--                        <input type="button" class="add" id="btnAddRow" value="Add Row" name="btnAddRow"/>-->
                            <!--                        <input type="button" class="delete" id="submitRemoveRows" value="Remove Rows"-->
                            <!--                               name="btnRemoveRows"/>-->
                            <input class="reset" id="btnReset" value="Reset" type="button"
                                   onclick="document.location.href='/ikonhrm/symfony/web/index.php/time/editTimesheet/timesheetId/23014/employeeId/279/actionName/viewMyTimesheet';"/>
                            <input class="cancel" id="btnBack" value="Cancel" type="button"
                                   onclick="document.location.href='/ikonhrm/symfony/web/index.php/time/viewMyTimesheet/timesheetStartDate/2024-03-04/employeeId/279';"/>
                        </p>

                    </div>
                </form>
            </div>
        </Layout>
    </t>
</templates>
