<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- Automated Action to delete expired token -->
    <data>
        <!-- Scheduled Action Definition -->
        <record id="custom_summarize_interviews" model="ir.cron">
            <field name="name">Interview: Summarize Interviews</field>
            <field name="model_id" ref="hr_recruitment.model_hr_applicant"/>
            <field name="state">code</field>
            <field name="code">model.summarize_interview()</field>
            <field name="interval_number">30</field>
            <field name="interval_type">minutes</field>
            <field name="user_id" ref="base.user_root"/>
            <field name="numbercall">-1</field>
            <field name="doall" eval="False"/>
            <field name="active" eval="True"/>
        </record>
    </data>

    <!-- Interview One -->
    <record id="custom_interview_view_form" model="ir.ui.view">
        <field name="name">Interview One Form</field>
        <field name="model">hr.applicant</field>
        <field name="inherit_id" ref="hr_recruitment.hr_applicant_view_form"/>
        <field name="arch" type="xml">
            <xpath expr="//notebook" position="inside">
                    <page string="1st Interview">
                        <div class="row">
                            <form>
                                <group string="Interview Details">
                                    <group>
                                        <field name="interviewer_one_ids" options="{'no_create': True, 'no_create_edit': True}" widget="many2many_avatar_user" string="Inteviewer" />
                                        <field name="interview_one_date" widget="date" string="Interview Date"/>
                                    </group>
                                    <group>
                                        <field name="interview_one_link" widget="url" string="Interview Link"/>
                                        <field name="interview_one_decision" widget="radio" string="Interview Decision"/>
                                    </group>
                                </group>
                                <group string="Interview Summary">
                                    <field name="interview_one_summary" placeholder="Summary..." string="Summary"/>
                                    <group>
                                        <field name="is_first_link_valid" invisible="1"/>
                                        <button string="Summarize" 
                                                type="object" 
                                                class="oe_highlight" 
                                                name="action_summarize_interview"
                                                attrs="{'invisible': [('is_first_link_valid', '=', False)]}"
                                                context="{'interview_num': 1}"
                                        />
                                    </group>
                                </group>
                            </form> 
                        </div>
                    </page>
                    <page string="2nd Interview">
                        <div class="row">
                            <form>
                                <group string="Interview Details">
                                    <group>
                                        <field name="interviewer_two_ids" options="{'no_create': True, 'no_create_edit': True}" widget="many2many_avatar_user" string="Interviewer" />
                                        <field name="interview_two_date" string="Interview Date"/>
                                    </group>
                                    <group>
                                        <field name="interview_two_link" widget="url" string="Interview Link"/>
                                        <field name="interview_two_decision" widget="radio" string="Interview Decision"/>
                                    </group>
                                </group>
                                <group string="Interview Summary">
                                    <field name="interview_two_summary" placeholder="Summary..." string="Summary"/>
                                    <group>
                                        <field name="is_second_link_valid" invisible="1"/>
                                        <button string="Summarize" 
                                                type="object" 
                                                class="oe_highlight" 
                                                name="action_summarize_interview"
                                                attrs="{'invisible': [('is_second_link_valid', '=', False)]}"
                                                context="{'interview_num': 2}"
                                        />
                                    </group>
                                </group>
                            </form> 
                        </div>
                    </page>
            </xpath>
        </field>
    </record>
</odoo>
